<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/register.css">
    <link rel="icon" href="../favicon.ico">
    <title>注册页面</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>立即注册</h1>
        <form action="" method="post" id="registerForm">
            <input type="text" id="username" placeholder="用户名" required>
            <input type="password" id="password" placeholder="密码" required>
            <input type="text" id="captcha" placeholder="验证码" required>
            <button type="button" id="getCaptcha">获取验证码</button>
            <button type="submit">注册</button>
        </form>
    </div>


    <script>

        // 获取随机数
        function getRandomFourDigitNumber() {
            return 1000 + Math.floor(Math.random() * 9000);
        }

        function updateCaptcha() {
            let randomNumber = getRandomFourDigitNumber();
            alert('小的给您送上验证码:' + randomNumber)
            // document.getElementById('captcha').value = randomNumber;
            console.log(randomNumber)
            // 点击注册按钮
            document.getElementById('registerForm').addEventListener('submit', function (event) {
                event.preventDefault();
                if (+document.getElementById('captcha').value === randomNumber) {
                    // 进行表单验证和注册逻辑
                    //1、本地存储用户名和密码
                    const username = document.getElementById('username').value;
                    const password = document.getElementById('password').value;
                    localStorage.setItem('username', username);
                    localStorage.setItem('password', password);
                    //2、验证成功就跳转页面
                    alert('注册成功！');
                    location.href = 'index.html'
                } else {
                    console.log('写的验证码：' + document.getElementById('captcha').value);
                    alert('验证码错了')
                }


            });
        }

        // 点击获取验证码按钮
        $(document).ready(function () {
            $('#getCaptcha').click(function () {
                updateCaptcha();

            });
        });
    </script>

</body>

</html>