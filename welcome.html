<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主页</title>
    <link rel="stylesheet" href="css/welcome.css" type="text/css">
</head>

<body>
    <div class="container">

        <!-- 导航栏模块 -->
        <div class="navigation">
            <span class="logo"><img src="images/logo.png" alt="" style="width: 100%;height: 45px;"></span>
            <ul>
                <li><a href="welcome.html">主页</a></li>
                <li><a href="#">产品</a></li>
                <li class="little-function"><a href="function/function.html">小功能</a></li>
                <li><a href="function\littleGame\gameIndex.html">小游戏</a></li>
            </ul>
            <div class="search">
                <input type="text" placeholder="请输入内容">
                <button>
                    搜索
                </button>
            </div>
            <input type="file" id="fileInput" accept="image/*" style="display: none;">
            <div class="head_pic" id="imageContainer" title="点击切换头像">&nbsp</div>
            <section class="SignIn">
                <span>
                    <button><a href="#">登陆</a></button>
                    <button><a href="index.html">退出</a></button>
                </span>
            </section>
        </div>

        <!-- 内容模块 -->
        <div class="main clearfix">
            <div id="dataContainer" class="dataContainer">

                <div class="txt">

                </div>
            </div>

            <div class="sanzi">
                <ul>

                    <li>同</li>
                    <li>是</li>
                    <li>天</li>
                    <li>涯</li>
                    <li>沦</li>
                    <li>落</li>
                    <li>人</li>
                    <li>，</li>
                    <li>相</li>
                    <li>逢</li>
                    <li>何</li>
                    <li>必</li>
                    <li>曾</li>
                    <li>相</li>
                    <li>识</li>
                </ul>
            </div>
        </div>

        <!-- 底部模块 -->
        <div class="footer" title="点击隐藏这一块内容">
            <div class="content">
                <div class="bg1"></div>
                <div class="bg2"></div>
                <div class="bear"></div>
                <span></span>
            </div>
        </div>
    </div>
    <script>
        // 使用AJAX请求获取本地JSON文件
        const xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                const data = JSON.parse(this.responseText);
                renderData(data); // 调用渲染数据的函数
                siGeData(data);
            }
        };
        xhr.open("GET", "data.json", true);
        xhr.send();


        // 渲染数据的函数
        let dataContainer = document.getElementById("dataContainer");
        function renderData(data) {
            dataContainer.innerHTML = "<h2>听说你学过ajax?</h2>";
            const itemDiv = document.createElement("div");
            itemDiv.innerHTML = "<p>名字: " + data.name + "</p><p>年龄: " + data.age + "</p><p>籍贯: " + data.city + "</p><p>想法:" +
                data.todo + "</p>";
            // console.log(itemDiv.innerHTML)    <p>文本：" + data.text + "<p/>;
            dataContainer.appendChild(itemDiv);
        }



        // 渲染诗歌的函数
        function siGeData(data) {
            const wordsArray = data.text.split(' '); // 将文本内容按空格拆分成数组
            const wordsPerParagraph = Math.ceil(wordsArray.length / 11); // 计算每个段落应包含的单词数量

            for (let i = 0; i < 11; i++) {
                const paragraph = document.createElement('p');
                const start = i * wordsPerParagraph;
                const end = start + wordsPerParagraph;
                let content = wordsArray.slice(start, end).join(' '); // 将单词数组切片并拼接成段落内容

                if (i === 0) {
                    content = '\u00A0\u00A0\u00A0\u00A0' + content;  // 第一个段落前面添加两个空格
                }

                paragraph.innerHTML = content;
                dataContainer.appendChild(paragraph); // 将段落添加到页面中
            }
        }
    </script>
    <script src="./js/welcome.js"> </script>
</body>

</html>